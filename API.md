# Описание API

Будем использовать REST API architecture.

Основной ресурс - Событие. 

| Название        | Поле        | Тип           |  Формат |
| :-------------- |:-----       |:--------------|:--------|
| ID              |id           | int           | uint32  |
| Начало          |start        | timestamp     | "%Y-%m-%dT%H:%M:%S" |
| Конец           |end          | timestamp     | "%Y-%m-%dT%H:%M:%S" |
| Описание        |description  | string        | unicode |

Который представляется в виде JSON:
```json
{
  "id": 1,
  "start": "2018-01-01T12:00:00",
  "end": "2018-01-01T13:25:00",
  "description": "Событие 1",
}
```

*Ручки:*

| URI           | Описание          | Тип           | Тело запроса | Ответ  |
|:-------       | :--------------   |:--------------|:-------------|:------ |
|`/add`         | Добавить событие  | POST          |JSON          |JSON    |
|`/delete/<id>` | Удалить событие   | DELETE        |<None>        |<None>  |
|`/modify/<id>` | Изменить событие  | POST          |JSON          |JSON    |
|`/get/<id>`    | Получить событие  | GET           |<None>        |JSON    |



## Добавить событие `/add` [POST]
Создаётся новое событие. Производятся проверки на формат каждого поля. Никаких других проверок не происходит.

В теле запроса ожидается JSON, который описывает новое событие:
```json
{
  "start": "%Y-%m-%dT%H:%M:%S",
  "end": "%Y-%m-%dT%H:%M:%S",
  "description": "string",
}
```
Все 3 параметра обязательные.

Возможные ответы:

| Код           | Значение          | Описание           |
|:-------       | :--------------   |:--------------     |
|`200`          | OK                | Возвращается ID нового созданного события ``` json {"id": 1} ``` |
|`400`          | Bad request       | Не все поля указаны или формат полей не совпадает с нужным. |


## Удалить событие `/delete/<id>` [DELETE]
`<id>` - ID события (int). 

Пример: `/delete/1`

Удаляется указанное событие. Если событие не существует - возвращается соответственный код.

Возможные ответы:

| Код           | Значение          | Описание           |
|:-------       | :--------------   |:--------------     |
|`200`          | OK                | Событие удалено |
|`400`          | Bad request       | Неверный формат `<id>` в урле. |
|`404`          | Not found         | Событие не существует или уже было удалено |
 
 
## Изменить событие `/modify/<id>` [POST]
`<id>` - ID события (int). 

Изменяет описание указанного события. В теле запроса ожидается JSON, который содержит значения изменяемых полей события. 

Например, если хочется изменить начало события и описание, ожидается JSON:
```json
{
  "start": "[New time in format <%Y-%m-%dT%H:%M:%S>]",
  "description": "[New description as <string>]",
}
```

Возможные ответы:

| Код           | Значение          | Описание           |
|:-------       | :--------------   |:--------------     |
|`200`          | OK                | Событие изменено |
|`400`          | Bad request       | Неверный формат `<id>` в урле или неверный формат передаваемых атрибутов события |
|`404`          | Not found         | Событие с указанным `<id>` не найдено |

С кодом 200 возвращается JSON с полным описанием изменённого события:
```json
{
  "id": 1,
  "start": "[New time in format <%Y-%m-%dT%H:%M:%S>]",
  "end": "[New time in format <%Y-%m-%dT%H:%M:%S>]",
  "description": "[New description as <string>]",
}
```


## Получить событие `/get/<id>` [GET]
`<id>` - ID события (int). 

Получить описание события с указанным `<id>`. Возвращается

Возможные ответы:

| Код           | Значение          | Описание           |
|:-------       | :--------------   |:--------------     |
|`200`          | OK                | Событие изменено. В теле ответа возвращается JSON с описанием события |
|`400`          | Bad request       | Неверный формат `<id>` в урле |
|`404`          | Not found         | Событие с указанным `<id>` не найдено |

Пример ответа с кодом `200`

```json
{
  "id": 2,
  "start": "2018-05-07T12:00:00",
  "end": "2018-05-08T13:25:00",
  "description": "Событие 2",
}
```
