# Введение

Будем использовать REST архитектуру. Почти REST. Для представления объектов будем использовать формат JSON и соответственно `application/json` Content-Type в запросах. Как оговаривали на лекции, self-descriptive в этом случае не до конца действует, но будем считать что описанные ниже JSON объекты сами по себе self-descriptive для описанных ручек.

# Описание API

Основной ресурс - Событие. Событие содержит следующие поля:

| Название        | Поле        | Тип           |  Формат |
| :-------------- |:-----       |:--------------|:--------|
| ID              |id           | int           | uint32  |
| Начало          |start        | timestamp     | "%Y-%m-%dT%H:%M:%S" |
| Конец           |end          | timestamp     | "%Y-%m-%dT%H:%M:%S" |
| Описание        |description  | string        | unicode |

Представление события в виде JSON:
```json
{
  "event": {
    "id": 1,
    "start": "2018-01-01T12:00:00",
    "end": "2018-01-01T13:25:00",
    "description": "Событие 1",
  }
}
```

*Существующие ручки:*

| URI           | Возможные типы    |
|:-------       | :--------------   |
|`/create`      | POST              |
|`/event/<id>`  | POST, GET, DELETE |
|`/events`      | GET               |



## Добавить событие `/create` [POST]
Создать новое событие.

Производятся проверки форматов полей. При несоответсвии форматов параметров событие не создаётся и возвращается соответствующий HTTP код.

В теле запроса ожидается JSON, который описывает поля нового события:
```json
{
  "start": "%Y-%m-%dT%H:%M:%S",
  "end": "%Y-%m-%dT%H:%M:%S",
  "description": "string",
}
```
Все 3 параметра обязательные. Если какое-то поле на задано - это рассматривается как ошибка.

Возможные ответы:

 Код           | Значение          | Описание           |
|:-------       | :--------------   |:--------------     |
|`400`          | Bad request       |  Возвращается в случае неверного формата полей или не все поля заданы. |
|`200`          | OK                | Возвращается при успешном создании события. В теле ответа передаётся JSON с описанием созданного события в формате: |

Тело ответа при успешном создании события (`200`):
```json
{
  "event":{
    "id": 1,
    "start": "2018-01-01T00:00:00",
    "end": "2018-01-01T01:00:00",
    "description": "Description string",
  }
}
```


## Взаимодействие с событием `/event/<id>` [GET, POST, DELETE]
`<id>` - ID события (int). Если `<id>` имеет плохой формат (не int, а string) - возвращается соответствующий код.

### GET

Получить описание события с указанным `<id>`.

Возможные ответы:

| Код           | Значение          | Описание           |
|:-------       | :--------------   |:--------------     |
|`200`          | OK                | В теле ответа возвращается описание события в формате JSON |
|`400`          | Bad request       | Неверный формат `<id>` в урле |
|`404`          | Not found         | Событие с указанным `<id>` не найдено |


### POST

Изменяет описание указанного события. Проверяется корректность формата `<id>` и существование события. В теле запроса ожидается JSON, который содержит значения изменяемых полей события. 

Например, если хочется изменить начало события и описание, ожидается JSON:
```json
{
  "start": "[New time in format <%Y-%m-%dT%H:%M:%S>]",
  "description": "[New description as <string>]",
}
```

Возможные ответы:

| Код           | Значение          | Описание           |
|:-------       | :--------------   |:--------------     |
|`200`          | OK                | Событие изменено. В теле возвращается описание события в формате JSON после модификации |
|`400`          | Bad request       | Неверный формат `<id>` в урле или неверный формат передаваемых атрибутов события |
|`404`          | Not found         | Событие с указанным `<id>` не найдено |


### DELETE

Удаляется указанное событие. Проверяется корректность формата `<id>` и существование события.

Возможные ответы:

| Код           | Значение          | Описание           |
|:-------       | :--------------   |:--------------     |
|`200`          | OK                | Событие удалено |
|`400`          | Bad request       | Неверный формат `<id>` в урле. |
|`404`          | Not found         | Событие не существует или уже было удалено |
 
## Получить коллекцию `/events/` [GET]
 
Получить коллекцию всех событий.
При успешной обработке возвращается JSON как список представлений отдельных событий:
 ```json
{
  "events": [
    "event": {
      "id": 1,
      ...
    },
    "event": {
      "id": 2,
      ...
    },
    ...
  ]
}
 ```
