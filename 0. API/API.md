# Описание API

Основная сущность - Событие. Событие содержит следующие поля:

| Название        | Поле        | Тип           |  Формат |
| :-------------- |:-----       |:--------------|:--------|
| ID              |id           | int           | uint32  |
| Начало          |start        | timestamp     | "%Y-%m-%dT%H:%M:%SZ" |
| Конец           |end          | timestamp     | "%Y-%m-%dT%H:%M:%SZ" |
| Описание        |description  | string        | unicode |

Здесь ID - уникальный идентификатор события. Какой именно - неоговаривается (hash, UID, порядковое значение).

Представление события в виде JSON:
```json
{
  "event": {
    "start": "2018-01-01T12:00:00Z",
    "end": "2018-01-01T13:25:00Z",
    "description": "Событие 1",
  }
}
```

Существующие ручки:

| URI           | Возможные типы    |
|:-------       | :--------------   |
|`/event/<id>`  | PATCH, GET, DELETE |
|`/events`      | GET, POST         |



## Взаимодействие с событием `/event/<id>` [GET, PATCH, DELETE]

Во всех запросах ниже`/event/<id>` - URI события. Возвращается при создании события (POST запросе в `/events`).

### 1. Получить событие [GET]

Возможные ответы:

| Код           | Значение          | Описание           |
|:-------       | :--------------   |:--------------     |
|`200`          | OK                | В теле ответа возвращается описание события в формате JSON |
|`404`          | Not found         | Событие с указанным URI не найдено |


### 2. Изменить событие [PATCH]

Изменяет описание указанного события. В теле запроса ожидается JSON, который содержит значения изменяемых полей события. 

Например, если хочется изменить начало события и описание, ожидается JSON:
```json
{
  "start": "[New time in format <%Y-%m-%dT%H:%M:%SZ>]",
  "description": "[New description as <string>]",
}
```

Возможные ответы:

| Код           | Значение          | Описание           |
|:-------       | :--------------   |:--------------     |
|`200`          | OK                | Событие изменено. В теле возвращается описание события в формате JSON после модификации |
|`400`          | Bad request       | Неверный формат передаваемых атрибутов события |
|`404`          | Not found         | Событие с указанным URI не найдено |


### 3. Удалить событие [DELETE]

Возможные ответы:

| Код           | Значение          | Описание           |
|:-------       | :--------------   |:--------------     |
|`200`          | OK                | Событие удалено |
|`404`          | Not found         | Событие не существует или уже было удалено |
 
 


## Взаимодействие с коллекцией `/events/` [GET, POST]


### 1. Добавить событие [POST]

Добавить новое событие в коллекцию событий.

Производятся проверки форматов полей. При несоответсвии форматов параметров событие не создаётся и возвращается соответствующий HTTP код.

В теле запроса ожидается JSON, который описывает поля нового события:
```json
{
  "start": "%Y-%m-%dT%H:%M:%SZ",
  "end": "%Y-%m-%dT%H:%M:%SZ",
  "description": "string",
}
```
Все 3 параметра обязательные. Если какое-то поле на задано - это рассматривается как ошибка.

Возможные ответы:

 Код           | Значение          | Описание           |
|:-------       | :--------------   |:--------------     |
|`400`          | Bad request       |  Возвращается в случае неверного формата полей или не все поля заданы. |
|`201`          | OK                | Возвращается при успешном создании события. В теле ответа передаётся JSON с описанием созданного события в формате: |

Тело ответа при успешном создании события (`201`):
```json
{
  "links": {
    "self": "/event/1",
  },
  "event":{
    "start": "2018-01-01T00:00:00Z",
    "end": "2018-01-01T01:00:00Z",
    "description": "Description string",
  }
}
```

### 2. Получить все события [GET]

Получить все события в коллекции.

При успешной обработке возвращается JSON как список представлений отдельных событий:
 ```json
{
  "events": [
    "event": {
      "id": 1,
      ...
    },
    "event": {
      "id": 2,
      ...
    },
    ...
  ]
}
 ```
